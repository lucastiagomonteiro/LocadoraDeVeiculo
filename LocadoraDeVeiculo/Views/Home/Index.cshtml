@model IEnumerable<VeiculoModel>

@section Styles {
    <link rel="stylesheet" href="~/css/HomeIndex.css" />
}

@{
    ViewData["Title"] = "Página Inicial";
}

<div class="pagina-inicial">

    <!-- Topo com frase, imagem e campo de busca -->
    <div class="destaque">
        <div class="frase-e-pesquisa">
            <h2 class="frase">
                Momentos em família começam com a escolha certa.<br />
                Viaje com conforto, viaje com a <span style="color:blue;">LocaVias</span>.
            </h2>
            <div class="pesquisa">
                <input type="text" id="filtro" placeholder="Pesquisar modelo ou categoria" class="input-pesquisa" />
            </div>
        </div>
    </div>

    <!-- Lista de veículos -->
    <h2 class="titulo-pagina">Veículos</h2>

    <div id="lista-veiculos" class="grade-veiculos">
        @foreach (var item in Model)
        {
            <div class="card-veiculo">
                <img src="@item.ImagemUrl" alt="Imagem do veículo" class="imagem-veiculo">

                <div class="conteudo-card">
                    <h3 class="modelo-veiculo">@item.Modelo</h3>

                    <ul class="detalhes-veiculo">
                        <li>Ano: @item.Ano</li>
                        <li>Cor: @item.Cor</li>
                        <li>Categoria: @item.Categoria</li>
                    </ul>

                    <p class="preco-veiculo">R$ @item.ValorDiaria.ToString("f2") / dia</p>

                    <a href="@Url.Action("Index", "Reserva", new { id = item.id })" class="botao-alugar">Alugar</a>
                </div>
            </div>
        }
    </div>

</div>

@section Scripts {
    <script>
        document.getElementById("filtro").addEventListener("keyup", function () {
            let valor = this.value;

            fetch(`/Home/Index?filtro=${valor}`, {
                method: "GET"
            })
            .then(response => response.text())
            .then(html => {
                // Pegar apenas o conteúdo da lista (sem recarregar toda a página)
                let parser = new DOMParser();
                let doc = parser.parseFromString(html, "text/html");
                let novaLista = doc.querySelector("#lista-veiculos").innerHTML;

                document.querySelector("#lista-veiculos").innerHTML = novaLista;
            });
        });
    </script>
}

                    